<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>vvas_xfilter &mdash; Vitis™ Video Analytics SDK 3.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../index.html" class="icon icon-home"> Vitis™ Video Analytics SDK
            <img src="../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Base Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common_plugins.html">VVAS GStreamer Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="vvas_meta_data_structures.html">VVAS Meta Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="for_developers.html">VVAS For Advanced Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug_support.html">VVAS Debug Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Embedded</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Embedded/platforms_and_applications.html">Platforms &amp; Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Embedded/embedded-plugins.html">VVAS GStreamer Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Embedded/Tutorials/Tutorials.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Center</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../DC/platforms_and_applications.html">Platforms &amp; Applications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../freq_asked_questions.html">Frequently Asked Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Vitis™ Video Analytics SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>vvas_xfilter</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/common/plugin_vvas_xfilter.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="vvas-xfilter">
<h1>vvas_xfilter<a class="headerlink" href="#vvas-xfilter" title="Permalink to this heading">¶</a></h1>
<p>The GStreamer vvas_xfilter is an infrastructure plug-in that is derived from GstBaseTransform. It supports one input pad and one output pad. The vvas_xfilter efficiently works with hard-kernel/soft-kernel/software (user-space) acceleration software library types as shown in the following figure.</p>
<div class="figure align-default">
<img alt="../../_images/image8.png" src="../../_images/image8.png" />
</div>
<p>This plug-in can operate in the following three modes.</p>
<ul class="simple">
<li><p><strong>Passthrough:</strong> Useful when the acceleration software library does not need to alter the input buffer.</p></li>
<li><p><strong>In-place:</strong> Useful when the acceleration software library needs to alter the input buffer.</p></li>
<li><p><strong>Transform:</strong> In this mode, for each input buffer, a new output buffer is produced.</p></li>
</ul>
<p>You must set the mode using the JSON file. Refer to <a class="reference internal" href="JSON-File-Schema.html"><span class="doc">JSON File Schema</span></a> for information related to the kernels-config property.</p>
<div class="figure align-default">
<img alt="../../_images/image9.png" src="../../_images/image9.png" />
</div>
<p>The vvas_xfilter plug-in takes configuration file as one of the input properties, kernels- config. This configuration file is in JSON format and contains information required by the kernel. During initialization, the vvas_xfilter parses the JSON file and performs the following tasks:</p>
<ul class="simple">
<li><p>Finds the VVAS acceleration software library in the path and loads the shared library.</p></li>
<li><p>Understands the acceleration software library type and prepares the acceleration software library handle (VVASKernel) to be passed to the core APIs.</p></li>
</ul>
<div class="section" id="input-and-output">
<h2>Input and Output<a class="headerlink" href="#input-and-output" title="Permalink to this heading">¶</a></h2>
<p>The vvas_xfilter accepts the buffers with the following color formats on input GstPad and output GstPad.</p>
<ul class="simple">
<li><p>GRAY8</p></li>
<li><p>NV12</p></li>
<li><p>BGR</p></li>
<li><p>RGB</p></li>
<li><p>YUY2</p></li>
<li><p>r210</p></li>
<li><p>v308</p></li>
<li><p>GRAY10_LE32</p></li>
<li><p>ABGR</p></li>
<li><p>ARGB</p></li>
</ul>
<p>The formats listed are the Xilinx IP supported color formats. To add other color formats, update the vvas_kernel.h and vvas_xfilter plug-ins.</p>
</div>
<div class="section" id="control-parameters-and-plug-in-properties">
<h2>Control Parameters and Plug-in Properties<a class="headerlink" href="#control-parameters-and-plug-in-properties" title="Permalink to this heading">¶</a></h2>
<p>The following table lists the GObject properties exposed by the vvas_xfilter. Most of them are only available in PCIe based platforms.</p>
<p>Table 18: GObject Properties</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 22%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Property Name</strong></p></th>
<th class="head"><p><strong>Platforms Supported</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Range</strong></p></th>
<th class="head"><p><strong>Default</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dynamic-config</p></td>
<td><p>PCIe and Embedded</p></td>
<td><p>String</p></td>
<td><p>N/A</p></td>
<td><p>Null</p></td>
<td><p>JSON formatted string contains kernel
specific configuration for run time changes</p></td>
</tr>
<tr class="row-odd"><td><p>dev-idx</p></td>
<td><p>PCIe only</p></td>
<td><p>Integer</p></td>
<td><p>0 to 31</p></td>
<td><p>0</p></td>
<td><p>Device used for kernel processing,
xclbin download.</p></td>
</tr>
<tr class="row-even"><td><p>kernels-config</p></td>
<td><p>PCIe and Embedded</p></td>
<td><p>String</p></td>
<td><p>N/A</p></td>
<td><p>NULL</p></td>
<td><p>JSON configuration file path based on VVAS
acceleration software library requirements.
Refer to the <a class="reference internal" href="JSON-File-Schema.html"><span class="doc">JSON File Schema</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>sk-cur-idx</p></td>
<td><p>PCIe only</p></td>
<td><p>Integer</p></td>
<td><p>0 to 31</p></td>
<td><p>0</p></td>
<td><p>Softkernel current index to be used for
executing job on device.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="json-format-for-vvas-xfilter-plug-in">
<h2>JSON Format for vvas_xfilter Plug-in<a class="headerlink" href="#json-format-for-vvas-xfilter-plug-in" title="Permalink to this heading">¶</a></h2>
<p>The following table provides the JSON keys accepted by the GStreamer vvas_xfilter plug-in.</p>
<p>Table 19: Root JSON Object Members</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 44%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>JSON Key</strong></p></th>
<th class="head"><p><strong>Item</strong></p></th>
<th class="head"><p><strong>Item Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xclbin-location</p></td>
<td><p>Description</p></td>
<td><p>The location of
the xclbin that
is used to
program the FPGA
device.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Value type</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Conditionally
mandatory:</p>
<ul class="simple">
<li><p>If the VVAS
acceleration
software
library is
developed for
hard-kernel IP
and
soft-kernel,
then the
xclbin-location
is mandatory.</p></li>
<li><p>If the VVAS
acceleration
software
library is
developed for
a software
library (e.g.,
OpenCV), then
the xclbin-location
is not required</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Default value</p></td>
<td><p>NULL</p></td>
</tr>
<tr class="row-even"><td><p>vvas-library-repo</p></td>
<td><p>Description</p></td>
<td><p>This is the VVAS
libraries repository
path to look for
acceleration
software libraries
by the VVAS
GStreamer plug-in.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Value type</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Default value</p></td>
<td><p>/usr/lib</p></td>
</tr>
<tr class="row-even"><td><p>element-mode</p></td>
<td><p>Description</p></td>
<td><p>GStreamer element
mode to operate.
Based on your
requirement, choose
one of the following
modes:</p>
<ol class="arabic simple">
<li><p>Passthrough: In
this mode,
element does
not want to
alter the
input buffer.</p></li>
<li><p>Inplace: In this
mode, element
wants to alter
the input
buffer itself
instead of
producing new
output
buffers.</p></li>
<li><p>Transform: In
this mode,
element
produces a
output buffer
for each input
buffer.</p></li>
</ol>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Value type</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Mandatory</p></td>
</tr>
<tr class="row-odd"><td><p>kernel</p></td>
<td><p>Description</p></td>
<td><p>A Kernel JSON object
provides information
about an VVAS
acceleration
software library
configuration.</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Value type</p></td>
<td><p>Kernel JSON Object</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Mandatory</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Default value</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Minimum value</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Maximum value</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Object members</p></td>
<td><p>Refer to <a class="reference internal" href="#kernel-json-object"><span class="std std-ref">Kernel JSON Object</span></a></p></td>
</tr>
</tbody>
</table>
<p>The information in the following table is specific to the kernel chosen.</p>
<p id="kernel-json-object">Table 20: Kernel JSON Object Members</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 31%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>JSON Key</strong></p></th>
<th class="head"><p><strong>Item</strong></p></th>
<th class="head"><p><strong>Item Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>library-name</p></td>
<td><p>Description</p></td>
<td><p>The name of the VVAS
acceleration
software library to
be loaded by the
VVAS GStreamer
plug-ins. The
absolute path of the
kernel library is
formed by the
pre-pending
vvas-library-repo
path.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Value type</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Mandatory</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Default value</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>kernel-name</p></td>
<td><p>Description</p></td>
<td><p>The name of the
IP/kernel in the
form of &lt;kernel
name&gt;:&lt;instance
name&gt;</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Value type</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Default value</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>kernel-access-mode</p></td>
<td><p>Description</p></td>
<td><p>Mode in which IP/Kernel
is to be accessed.
“shared” or “exclusive”</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Value type</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Default value</p></td>
<td><p>“shared”</p></td>
</tr>
<tr class="row-even"><td><p>config</p></td>
<td><p>Description</p></td>
<td><p>Holds the
configuration
specific to the VVAS
acceleration
software library.
VVAS GStreamer
plug-ins do not
parse this JSON
object, instead it
is sent to the
acceleration
software library.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Value type</p></td>
<td><p>Object</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Default value</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>softkernel</p></td>
<td><p>Description</p></td>
<td><p>Contains the
information specific
to the soft-kernel.
This JSON object is
valid only for the
PCIe based
platforms.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Value type</p></td>
<td><p>Object</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Mandatory or
optional</p></td>
<td><p>Mandatory if kernel
library is written
for soft-kernel.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Default value</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Members</p></td>
<td><p>Not required for
embedded platforms.</p></td>
</tr>
</tbody>
</table>
<p>For <code class="docutils literal notranslate"><span class="pre">vvas_xfilter</span></code> implementation details, refer to <a class="reference external" href="https://github.com/Xilinx/VVAS/tree/master/vvas-gst-plugins/sys/filter">vvas_xfilter source code</a></p>
</div>
<div class="section" id="example-json-configuration-files">
<h2>Example JSON Configuration Files<a class="headerlink" href="#example-json-configuration-files" title="Permalink to this heading">¶</a></h2>
<div class="section" id="json-file-for-a-hard-kernel">
<h3>JSON File for a Hard Kernel<a class="headerlink" href="#json-file-for-a-hard-kernel" title="Permalink to this heading">¶</a></h3>
<p>The following JSON file uses vvas_xfilter to control multi-scaler IP (hard-kernel). The acceleration software library accessing the register map is libvvas_xcrop.so.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;xclbin-location&quot;</span><span class="p">:</span> <span class="s2">&quot;/run/media/mmcblk0p1/dpu.xclbin&quot;</span><span class="p">,</span>
 <span class="s2">&quot;vvas-library-repo&quot;</span><span class="p">:</span> <span class="s2">&quot;/usr/lib/&quot;</span><span class="p">,</span>
 <span class="s2">&quot;element-mode&quot;</span><span class="p">:</span> <span class="s2">&quot;passthrough&quot;</span><span class="p">,</span>
 <span class="s2">&quot;kernel&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;kernel-name&quot;</span><span class="p">:</span> <span class="s2">&quot;v_multi_scaler:</span><span class="si">{v_multi_scaler_1}</span><span class="s2">&quot;</span><span class="p">,</span>
   <span class="s2">&quot;library-name&quot;</span><span class="p">:</span> <span class="s2">&quot;libvvas_xcrop.so&quot;</span><span class="p">,</span>
   <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
 <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on January 31, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>