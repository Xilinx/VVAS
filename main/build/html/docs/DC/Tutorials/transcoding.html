


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/pro.min.css" media="all" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Multi-instance High density Transcoding" href="multi_instance_launch_utilities.html" />
    <link rel="prev" title="Tutorials for PCIe/Data Center platforms" href="Tutorials.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Video Analytics SDK
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Base Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../common/common_plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../common/vvas_meta_data_structures.html">Meta Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../common/for_developers.html">For Advanced Developers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Embedded</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Embedded/platforms_and_applications.html">Platforms &amp; Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Embedded/embedded-plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Embedded/Tutorials/Tutorials.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Center</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../platforms_and_applications.html">Platforms &amp; Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DC_plugins.html">Plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Basic Transcoding</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pre-requisite">Pre-requisite</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-transcode-pipeline">Basic transcode pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transcode-pipeline-with-scaling-resize">Transcode pipeline with scaling (resize)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#abr-ladder-pipeline">ABR ladder pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transcoding-with-lookahead">Transcoding with lookahead</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="multi_instance_launch_utilities.html">Multi-instance Transcoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="xabrladder.html">ABR Ladder Application</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../freq_asked_questions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/VVAS/1.1/build/html/index.html">1.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/VVAS/1.0/build/html/index.html">1.0</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../_sources/docs/DC/Tutorials/transcoding.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Vitis™ Video Analytics SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Tutorials.html">Tutorials for PCIe/Data Center platforms</a> &raquo;</li>
        
      <li>Basic Transcoding pipelines</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/docs/DC/Tutorials/transcoding.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="basic-transcoding-pipelines">
<h1>Basic Transcoding pipelines<a class="headerlink" href="#basic-transcoding-pipelines" title="Permalink to this heading">¶</a></h1>
<p>This section covers how to build and launch basic transcoding pipelines using VVAS. There are different types of transcoding usecases and each one is covered in details. VVAS plug-ins supports H264 and H265 (HEVC) encoding formats only. For improving quality, VVAS also supports <code class="docutils literal notranslate"><span class="pre">Lookahead</span></code> feature through <code class="docutils literal notranslate"><span class="pre">vvas_xlookahead</span></code> plug-in and kernel on U30 platform.</p>
<section id="pre-requisite">
<h2>Pre-requisite<a class="headerlink" href="#pre-requisite" title="Permalink to this heading">¶</a></h2>
<p>Before start executing the Transcoding usecases, make sure the setup is ready:</p>
<blockquote>
<div><ul class="simple">
<li><p>Required Alveo U30 cards are installed in the PCIe slots of the server machine.</p></li>
<li><p>VVAS 2.0 Package has been installed and the Alveo U30 cards are flashed with the required image. If not, follow the section <a class="reference internal" href="../u30_platform/u30_setup.html"><span class="doc">Alveo U30 setup for VVAS 2.0</span></a></p></li>
</ul>
</div></blockquote>
<p>If your setup is re-booted, or you have opened a fresh terminal, perform the following steps.</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>/opt/xilinx/xcdr/setup.sh
</pre></div>
</div>
</div></blockquote>
</section>
<section id="basic-transcode-pipeline">
<h2>Basic transcode pipeline<a class="headerlink" href="#basic-transcode-pipeline" title="Permalink to this heading">¶</a></h2>
<p>In this use-case, there is only change of the encoding format. Frame resolution remains same. vvas_xvcudec is decoder plug-in and vvas_xvcuenc is encoder plugin. The pipeline mentioned below is not using many parameters and relying on default plugin properties. You may provide different configuration parameters in thi pipeline to see the difference in the encoded output.
For detailed information about the available configuration parameters, refer to plug-in description <a class="reference internal" href="../DC_plugins.html#vvas-xvcudec"><span class="std std-ref">vvas_xvcudec</span></a> and <a class="reference internal" href="../DC_plugins.html#vvas-xvcuenc"><span class="std std-ref">vvas_xvcuenc</span></a></p>
<p>Please note that ‘dev-idx’ parameter range can vary from 0 to N where N can be obtained with below command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">N</span><span class="o">=</span>xbutil  examine <span class="p">|</span> grep xilinx_u30 <span class="p">|</span> wc -l
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc <span class="nv">location</span><span class="o">=</span>&lt;mp4 file&gt; <span class="se">\</span>
! qtdemux <span class="se">\</span>
! h264parse <span class="se">\</span>
! vvas_xvcudec dev-idx<span class="o">=</span><span class="m">3</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="se">\</span>
! vvas_xvcuenc dev-idx<span class="o">=</span><span class="m">3</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="se">\</span>
! h265parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>fpssink video-sink<span class="o">=</span><span class="s2">&quot;fakesink&quot;</span> text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> -v
</pre></div>
</div>
<p>The above pipeline transcodes a given mp4 file encoded with H264 codec to H265 codec and displays the rate, frames per second, at which it is transcoding the input. Currently output is not stored into any file. In case you want to store the transcoded output, change the ‘fakesink’ to ‘filesink’</p>
</section>
<section id="transcode-pipeline-with-scaling-resize">
<h2>Transcode pipeline with scaling (resize)<a class="headerlink" href="#transcode-pipeline-with-scaling-resize" title="Permalink to this heading">¶</a></h2>
<p>In earlier example, we have transcoded an input stream while retaining original frame resolution. In some usecases, we may have to resize the input frame to a different resolution and then encode. This resize operation is achieved using <a class="reference internal" href="../../common/common_plugins.html#vvas-xabrscaler"><span class="std std-ref">vvas_xabrscaler</span></a> plug-in. This is hardware accelerated resize operation.</p>
<p>Please note that ‘dev-idx’ parameter range can vary from 0 to N where N can be obtained with below command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">N</span><span class="o">=</span>xbutil  examine <span class="p">|</span> grep xilinx_u30 <span class="p">|</span> wc -l
</pre></div>
</div>
<p>In below example, 1080p stream is decoded, scaled down to 720p and then encoded to H265 stream of 720p.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc <span class="nv">location</span><span class="o">=</span>&lt;input mp4 file&gt; <span class="se">\</span>
! qtdemux <span class="se">\</span>
! h264parse <span class="se">\</span>
! vvas_xvcudec dev-idx<span class="o">=</span><span class="m">3</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="se">\</span>
! vvas_xabrscaler dev-idx<span class="o">=</span><span class="m">3</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; scale-mode<span class="o">=</span><span class="m">2</span> <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">1280</span>, <span class="nv">height</span><span class="o">=</span><span class="m">720</span> <span class="se">\</span>
! queue max-size-buffers<span class="o">=</span><span class="m">1</span> <span class="se">\</span>
! vvas_xvcuenc dev-idx<span class="o">=</span><span class="m">3</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="se">\</span>
! h265parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>fpssink video-sink<span class="o">=</span><span class="s2">&quot;fakesink&quot;</span> text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> -v
</pre></div>
</div>
</section>
<section id="abr-ladder-pipeline">
<h2>ABR ladder pipeline<a class="headerlink" href="#abr-ladder-pipeline" title="Permalink to this heading">¶</a></h2>
<p>ABR (Adaptive Bitrate) Enoding is required in scenarios where one needs to transmit the streams at different bitrate and resolutions. In this case one input stream is transcoded with different resolutions and encoding parameters as needed. This is very useful use case.</p>
<p>Input stream is decoded using ‘vvas_xvcudec’ plug-in. ‘vvas_xabrscaler’ plug-in is used to resize the input frame into several output resolutions. Each output resolution from vvas_xabrscaler will be encoded into a separate output stream. Each encoding session can be of different configurations, as captured in the example below:</p>
<figure class="align-default">
<img alt="docs/DC/images/abr_ladder.png" src="docs/DC/images/abr_ladder.png" />
</figure>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc num-buffers<span class="o">=</span><span class="m">2000</span> <span class="nv">location</span><span class="o">=</span>&lt;input mp4 file&gt; <span class="se">\</span>
! qtdemux <span class="se">\</span>
! queue <span class="se">\</span>
! h264parse <span class="se">\</span>
! vvas_xvcudec dev-idx<span class="o">=</span><span class="m">3</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="se">\</span>
! queue <span class="se">\</span>
! vvas_xabrscaler xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; dev-idx<span class="o">=</span><span class="m">3</span> <span class="nv">ppc</span><span class="o">=</span><span class="m">4</span> scale-mode<span class="o">=</span><span class="m">2</span> avoid-output-copy<span class="o">=</span><span class="nb">true</span> <span class="nv">name</span><span class="o">=</span>sc_03 sc_03.src_0 <span class="se">\</span>
! queue <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">1280</span>, <span class="nv">height</span><span class="o">=</span><span class="m">720</span> <span class="se">\</span>
! tee <span class="nv">name</span><span class="o">=</span>tee_03 tee_03. <span class="se">\</span>
! queue <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">60</span>/1 <span class="se">\</span>
! vvas_xvcuenc xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="nv">name</span><span class="o">=</span>enc_720p60_dev3_0 dev-idx<span class="o">=</span><span class="m">3</span> target-bitrate<span class="o">=</span><span class="m">4000</span> <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_720p60_dev3_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> tee_03. <span class="se">\</span>
! queue <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">30</span>/1 ! vvas_xvcuenc xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="nv">name</span><span class="o">=</span>enc_720p30_dev3_0 dev-idx<span class="o">=</span><span class="m">3</span> target-bitrate<span class="o">=</span><span class="m">3000</span> <span class="se">\</span>
! h264parse ! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_720p30_dev3_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> sc_03.src_1 <span class="se">\</span>
! queue <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">848</span>, <span class="nv">height</span><span class="o">=</span><span class="m">480</span> <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">30</span>/1 <span class="se">\</span>
! vvas_xvcuenc <span class="nv">name</span><span class="o">=</span>enc_480p30_dev3_0 dev-idx<span class="o">=</span><span class="m">3</span> target-bitrate<span class="o">=</span><span class="m">2500</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_480p30_dev3_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> sc_03.src_2 <span class="se">\</span>
! queue <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">640</span>, <span class="nv">height</span><span class="o">=</span><span class="m">360</span> <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">30</span>/1 <span class="se">\</span>
! vvas_xvcuenc <span class="nv">name</span><span class="o">=</span>enc_360p30_dev3_0 dev-idx<span class="o">=</span><span class="m">3</span> target-bitrate<span class="o">=</span><span class="m">1250</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_360p30_dev3_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> sc_03.src_3 <span class="se">\</span>
! queue <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">288</span>, <span class="nv">height</span><span class="o">=</span><span class="m">160</span> <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">30</span>/1 <span class="se">\</span>
! vvas_xvcuenc <span class="nv">name</span><span class="o">=</span>enc_160p30_dev3_0 dev-idx<span class="o">=</span><span class="m">3</span> target-bitrate<span class="o">=</span><span class="m">625</span> xclbin-location<span class="o">=</span>&lt;xclbin file path&gt; <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_160p30_dev3_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> -v
</pre></div>
</div>
<p>In the above example, one <a class="reference external" href="mailto:1080p&#37;&#52;&#48;60fps">1080p<span>&#64;</span>60fps</a> stream is decoded to NV12 raw data (by default) and is given as input to vvas_xabrscaler plugin. This plug-in resizes the input frame into multiple resolutions. In this case, it is 720p, 480p, 360p, 160p resolutions. It should be noted that, <a class="reference external" href="mailto:720p&#37;&#52;&#48;60">720p<span>&#64;</span>60</a> stream is passed to encoder via
‘videorate’ plugin which changes framerate from 60 to 30 and also the same <a class="reference external" href="mailto:720p&#37;&#52;&#48;60">720p<span>&#64;</span>60</a> is also passed to encoder to generate <a class="reference external" href="mailto:720p&#37;&#52;&#48;60">720p<span>&#64;</span>60</a> encoded stream. This is achieved with the help of ‘tee’ plugin  functionality of gstreamer.
Similarly, with the help of ‘videorate’ plugin, all the remaining scaler output streams are encoded at 30fps.</p>
</section>
<section id="transcoding-with-lookahead">
<h2>Transcoding with lookahead<a class="headerlink" href="#transcoding-with-lookahead" title="Permalink to this heading">¶</a></h2>
<p>AMD has developped an IP, Lookahead, for visual quality improvements. Example of pipeline with lookahead is mentioned below:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v filesrc <span class="nv">location</span><span class="o">=</span>&lt;input h264 file&gt; <span class="se">\</span>
! queue <span class="se">\</span>
! h264parse <span class="se">\</span>
! vvas_xvcudec xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin dev-idx<span class="o">=</span><span class="m">0</span> <span class="se">\</span>
! vvas_xabrscaler xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin dev-idx<span class="o">=</span><span class="m">0</span> <span class="nv">ppc</span><span class="o">=</span><span class="m">4</span> scale-mode<span class="o">=</span><span class="m">2</span> <span class="nv">name</span><span class="o">=</span>sc_00 sc_00.src_0 <span class="se">\</span>
! queue <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">1280</span>, <span class="nv">height</span><span class="o">=</span><span class="m">720</span>, <span class="nv">format</span><span class="o">=</span>NV12 <span class="se">\</span>
! tee <span class="nv">name</span><span class="o">=</span>tee_00 tee_00. <span class="se">\</span>
! queue <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">60</span>/1 <span class="se">\</span>
! queue <span class="se">\</span>
! vvas_xlookahead xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin codec-type<span class="o">=</span><span class="m">0</span> spatial-aq<span class="o">=</span><span class="m">1</span> temporal-aq<span class="o">=</span><span class="m">1</span> lookahead-depth<span class="o">=</span><span class="m">8</span> dev-idx<span class="o">=</span><span class="m">0</span> <span class="se">\</span>
! vvas_xvcuenc xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin <span class="nv">name</span><span class="o">=</span>enc_720p60_dev0_0 dev-idx<span class="o">=</span><span class="m">0</span> target-bitrate<span class="o">=</span><span class="m">4000</span> <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_720p60_dev0_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> tee_00. <span class="se">\</span>
! queue <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">30</span>/1 <span class="se">\</span>
! queue <span class="se">\</span>
! vvas_xlookahead xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin codec-type<span class="o">=</span><span class="m">0</span> spatial-aq<span class="o">=</span><span class="m">1</span> temporal-aq<span class="o">=</span><span class="m">1</span> lookahead-depth<span class="o">=</span><span class="m">8</span> dev-idx<span class="o">=</span><span class="m">0</span> <span class="se">\</span>
! vvas_xvcuenc xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin <span class="nv">name</span><span class="o">=</span>enc_720p30_dev0_0 dev-idx<span class="o">=</span><span class="m">0</span> target-bitrate<span class="o">=</span><span class="m">3000</span> <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_720p30_dev0_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> sc_00.src_1 <span class="se">\</span>
! queue <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">848</span>, <span class="nv">height</span><span class="o">=</span><span class="m">480</span>, <span class="nv">format</span><span class="o">=</span>NV12 <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">30</span>/1 <span class="se">\</span>
! queue <span class="se">\</span>
! vvas_xlookahead xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin codec-type<span class="o">=</span><span class="m">0</span> spatial-aq<span class="o">=</span><span class="m">1</span> temporal-aq<span class="o">=</span><span class="m">1</span> lookahead-depth<span class="o">=</span><span class="m">8</span> dev-idx<span class="o">=</span><span class="m">0</span> <span class="se">\</span>
! vvas_xvcuenc xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin <span class="nv">name</span><span class="o">=</span>enc_480p30_dev0_0 dev-idx<span class="o">=</span><span class="m">0</span> target-bitrate<span class="o">=</span><span class="m">2500</span> <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_480p30_dev0_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> sc_00.src_2 <span class="se">\</span>
! queue <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">640</span>, <span class="nv">height</span><span class="o">=</span><span class="m">360</span>, <span class="nv">format</span><span class="o">=</span>NV12 <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">30</span>/1 <span class="se">\</span>
! queue <span class="se">\</span>
! vvas_xlookahead xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin codec-type<span class="o">=</span><span class="m">0</span> spatial-aq<span class="o">=</span><span class="m">1</span> temporal-aq<span class="o">=</span><span class="m">1</span> lookahead-depth<span class="o">=</span><span class="m">8</span> dev-idx<span class="o">=</span><span class="m">0</span> <span class="se">\</span>
! vvas_xvcuenc xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin <span class="nv">name</span><span class="o">=</span>enc_360p30_dev0_0 dev-idx<span class="o">=</span><span class="m">0</span> target-bitrate<span class="o">=</span><span class="m">1250</span> <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_360p30_dev0_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> sc_00.src_3 <span class="se">\</span>
! queue <span class="se">\</span>
! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">288</span>, <span class="nv">height</span><span class="o">=</span><span class="m">160</span>, <span class="nv">format</span><span class="o">=</span>NV12 <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">30</span>/1 <span class="se">\</span>
! queue <span class="se">\</span>
! vvas_xlookahead xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin codec-type<span class="o">=</span><span class="m">0</span> spatial-aq<span class="o">=</span><span class="m">1</span> temporal-aq<span class="o">=</span><span class="m">1</span> lookahead-depth<span class="o">=</span><span class="m">8</span> dev-idx<span class="o">=</span><span class="m">0</span> <span class="se">\</span>
! vvas_xvcuenc xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin <span class="nv">name</span><span class="o">=</span>enc_160p30_dev0_0 dev-idx<span class="o">=</span><span class="m">0</span> target-bitrate<span class="o">=</span><span class="m">625</span> <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_scale_160p30_dev0_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span> sc_00.src_4 <span class="se">\</span>
! queue ! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">1920</span>, <span class="nv">height</span><span class="o">=</span><span class="m">1080</span>, <span class="nv">format</span><span class="o">=</span>NV12 <span class="se">\</span>
! videorate <span class="se">\</span>
! video/x-raw, <span class="nv">framerate</span><span class="o">=</span><span class="m">60</span>/1 <span class="se">\</span>
! queue <span class="se">\</span>
! vvas_xlookahead xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin codec-type<span class="o">=</span><span class="m">0</span> spatial-aq<span class="o">=</span><span class="m">1</span> temporal-aq<span class="o">=</span><span class="m">1</span> lookahead-depth<span class="o">=</span><span class="m">8</span> dev-idx<span class="o">=</span><span class="m">0</span> <span class="se">\</span>
! vvas_xvcuenc xclbin-location<span class="o">=</span>/opt/xilinx/xcdr/xclbins/transcode.xclbin <span class="nv">name</span><span class="o">=</span>enc_1080p60_dev0_0 dev-idx<span class="o">=</span><span class="m">0</span> target-bitrate<span class="o">=</span><span class="m">5000</span> <span class="se">\</span>
! h264parse <span class="se">\</span>
! fpsdisplaysink <span class="nv">name</span><span class="o">=</span>sink_xcode_maxresolution_dev0_0 video-sink<span class="o">=</span>fakesink text-overlay<span class="o">=</span><span class="nb">false</span> <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span>
</pre></div>
</div>
<p>or more information on lookahead plugin options, refer to <a class="reference internal" href="../DC_plugins.html"><span class="doc">DC Plugins</span></a></p>
</section>
</section>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="multi_instance_launch_utilities.html" class="btn btn-neutral float-right" title="Multi-instance High density Transcoding" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Tutorials.html" class="btn btn-neutral float-left" title="Tutorials for PCIe/Data Center platforms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on June 22, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>